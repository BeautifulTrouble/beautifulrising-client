{
  "port": 3001,
  "path": "/webhook",
  "secret": "6GZRiqF=LROYuTPn2#1q",
  "log": "/home/beautifulrising/beautifulrising-client/webhook.log",
  "rules": [{
    "event": "push",
    "match": "ref == \"refs/heads/develop\" && repository.name == \"beautifulrising-client\"",
    "exec": "(cd ~/beautifulrising-client && while [ -n \"`find ./webhook.lock -mmin -3`\" ];do sleep 1; done && REV=`git log -1 --format=%H package.json` && touch webhook.lock && git checkout develop && git pull && ([ \"$REV\" = \"`git log -1 --format=%H package.json`\" ] || npm install) && npm run build && rm -vrf build.develop && cp -av build build.develop && ln -s ~/beautiful-rising/assets build.develop/assets && rm -v webhook.lock) >~/beautifulrising-client/webhook-build-develop.log 2>&1"
  }, {
    "event": "push",
    "match": "ref == \"refs/heads/master\" && repository.name == \"beautifulrising-client\"",
    "exec": "(cd ~/beautifulrising-client && while [ -n \"`find ./webhook.lock -mmin -3`\" ];do sleep 1; done && REV=`git log -1 --format=%H package.json` && touch webhook.lock && git checkout master && git pull && ([ \"$REV\" = \"`git log -1 --format=%H package.json`\" ] || npm install) && npm run build && rm -vrf build.master && cp -av build build.master && ln -s ~/beautiful-rising/assets build.master/assets && rm -v webhook.lock) >~/beautifulrising-client/webhook-build-master.log 2>&1"
  }]
}
