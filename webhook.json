{
  "port": 3001,
  "path": "/webhook",
  "secret": "6GZRiqF=LROYuTPn2#1q",
  "log": "/home/beautifulrising/beautifulrising-client/webhook.log",
  "rules": [{
    "event": "push",
    "match": "ref == \"refs/heads/develop\" && repository.name == \"beautifulrising-client\"",
    "exec": "(cd ~/beautifulrising-client-develop && while [ -n \"`find ./webhook.lock -mmin -3`\" ];do sleep 1; done && touch webhook.lock && REV=`md5sum package.json` && git pull && ([ \"$REV\" = \"`md5sum package.json`\" ] || npm install) && npm run build && rm -vrf site && cp -av build site && ln -s ~/assets site/assets && rm -v webhook.lock) >~/beautifulrising-client-develop/webhook-build.log 2>&1"
  }, {
    "event": "push",
    "match": "ref == \"refs/heads/beta\" && repository.name == \"beautifulrising-client\"",
    "exec": "(cd ~/beautifulrising-client-beta && while [ -n \"`find ./webhook.lock -mmin -3`\" ];do sleep 1; done && touch webhook.lock && REV=`md5sum package.json` && git pull && ([ \"$REV\" = \"`md5sum package.json`\" ] || npm install) && npm run build && rm -vrf site && cp -av build site && ln -s ~/assets site/assets && rm -v webhook.lock) >~/beautifulrising-client-beta/webhook-build.log 2>&1"
  }, {
    "event": "push",
    "match": "ref == \"refs/heads/master\" && repository.name == \"beautifulrising-client\"",
    "exec": "(cd ~/beautifulrising-client && while [ -n \"`find ./webhook.lock -mmin -3`\" ];do sleep 1; done && touch webhook.lock && REV=`md5sum package.json` && git pull && ([ \"$REV\" = \"`md5sum package.json`\" ] || npm install) && npm run build && rm -vrf site && cp -av build site && ln -s ~/assets site/assets && rm -v webhook.lock) >~/beautifulrising-client/webhook-build.log 2>&1"
  }]
}
